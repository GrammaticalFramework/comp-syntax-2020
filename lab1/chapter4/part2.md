# Part 2

A possible approach to test [the given English grammar](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/English.dbnf) is to simply run `gf-ud dbnf English.dbnf Utt` on the various sentences.
However, the CONLL files obtained in this way, like

```
# text = A small town with two minarets glides by.
# analyses = 0
# parsetree = (Chunks (Str A) (Str small) (Str town) (Prep with) (Str two) (Str minarets) (Str glides) (Str 'by.'))
1	A	_	X	_	_	8	dep	_	_
2	small	_	X	_	_	8	dep	_	_
3	town	_	X	_	_	8	dep	_	_
4	with	_	ADP	_	_	8	dep	_	_
5	two	_	X	_	_	8	dep	_	_
6	minarets	_	X	_	_	8	dep	_	_
7	glides	_	X	_	_	8	dep	_	_
8	by.	_	X	_	_	0	root	_	_
```
are of little to no interest. Results worth comparing with the hand-drawn phrase structure trees from [part 1](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/part1.pdf) can only be obtained by passing the parser POS-tagged sentences, which can be found in two [automatically generated](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/postagger.py) files ([en-pos.conll](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/en-pos.conll) and [es-pos.conll](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/es-pos.conll)). The output of running `gf-ud dbnf English.dbnf Utt` on these two files can be found in [parsed_postagged_sentences-en.conll](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/parsed_postagged_sentences-en.conll) and [parsed_postagged_sentences-es.conll](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/parsed_postagged_sentences-es.conll).

## General comments
- when it comes to the number of sentences `gf-ud` is unable to build a parse tree for at all (7/24 in Spanish, 4/24 in English), the given grammar seems -unsurprisingly- to work better on the English corpus
- no sentence is unambiguous in any of the language: when the program is in fact able to parse the sentences, it always returns two trees at least (often many more)

## Correctness of the automatically generated trees
Considering that:

- the hand-drawn phrase-structure trees do not strictly follow any precise convention, let alone that of the trees generated by `gf-ud`
- they are, by definition, _hand drawn_, meaning that they cannot be efficiently converted into bracketed strings
- they are the first syntax trees I draw

it is not reasonable to consider them as the "gold standard" to compare the automatically generated sentences to (in particular, it does not make sense to evaluate the accuracy of the parser by running `gf-ud eval`).

This will not prevent us to make some informal comparisons between hand-drawn and automatically generated phrase structure trees and to evaluate the accuracy of dependency parsing via `gf-ud eval` (when it comes to dependency trees, we have in fact some sort of "silver standard": the standard CONLL files found in [the previous chapter's folder](https://github.com/harisont/comp-syntax-2020/tree/master/lab1/chapter3)).

### Phrase structure trees
Note: the hand-drawn trees can be found in [part1.pdf](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/part1.pdf), while the ones generated by gf-ud are available both as CONLL files and as PDFs, [one for English](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/en_pstrees.pdf) and [one for Spanish](https://github.com/harisont/comp-syntax-2020/blob/master/lab1/chapter4/es_pstrees.pdf).

1. "Who are they?"/"¿Quiénes son?": the Spanish parse tree generated by gf-ud is practically identical to the hand-drawn one, while in English the two trees are quite different, and in particular, in the gf-ud-generated one,  "Who are they" is parsed as a `S` instead of as a `QS`.
2. "A small town with two minarets glides by."/"Una pequeña ciudad con dos minaretes pasa deslizándose.": apart from differences arising from the fact that the hand-drawn trees do not follow the convention used in gf-ud exactly, the two English trees are identical, while the Spanish ones differ significantly in the way they treat "deslizándose". In this case, the mistake is probably not in the hand-drawn tree, which mirrors the gold standard for dependency trees.
3. "I was just a boy with muddy shoes."/"Yo era solamente un chico con los zapatos llenos de barro.": again, the English trees are basically identical. The Spanish gf-ud generated one, on the other hand, is definitely wrong as it parses "Yo era solamente un chico con los zapatos llenos de barro" as a `NP`, "era solamente un chico con los zapatos llenos" as a "QS" and attaches "de barro" directly to the main `NP`.
4. "he collected cards and traded them with the other boys"/"colecionaba tarjetas y las intercambiaba con los otros chicos": in this case, both of the automatically generated trees are fundamentally wrong. In English, the sentence is parsed as a `QS` for reasons not entirely clear to me, while in Spanish it is parsed as an `Imp`. This might be due to the absence of an explicit subject, which is optional in Spanish but necessary in English whenever the mood of the verb is not imperative.
5. "this crime carries a penalty of five years in prison"/"este delito conlleva una pena de cinco años de prisión": as expected, all four trees are identical to each other if we disregard different conventions
6. "the news was carried to every village in the province"/"la noticia fue llevada a todos los pueblos de la provincia": while the gf-ud generated English parse trees matches the hand-drawn one, the program is unable to parse the Spanish translation of the sentence. In particular, it treats "la noticia fue llevada a todos" y "los pueblos de la provincia" as two independent `NP`s. It's interesting that this happens, as the only syntactically significant difference between the English sentence and its Spanish translation is that "every village" is mapped to "todos los pueblos" (so in Spanish the determiner agrees with "pueblos" and there is one article more).

### Dependency trees
As mentioned above, in the case of dependency trees it is possible to make a "quantitative" comparison by running `gf-ud eval` on the CONLL files generated by gf-ud, using the hand-made CONLL files written for the previous assignment as the gold standard.

What we get is, for English
```
UDScore {
  udScore = 0.6479215229215228,
  udMatching = 24,
  udTotalLength = 337,
  udSamesLength = 219,
  udPerfectMatch = 1
}
```
 and for Spanish
 ```
 UDScore {
   udScore = 0.547398832079812,
   udMatching = 24,
   udTotalLength = 356,
   udSamesLength = 189,
   udPerfectMatch = 2}
 ```

 In particular, the `udScore` tells us how similar the dependency trees are to the gold standard. As we are working with an English grammar, this score is obviously higher (but not by the largest measure) for English than it is for Spanish.
